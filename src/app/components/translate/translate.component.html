<div class="card border-0 rounded shadow-lg d-flex justify-content-center">
  <div [ngClass]="isError ? 'error' : ''" >
    <div class="card-header border-bottom border-1">
      <div class="d-flex">
        <div class="d-flex flex-row flex-even align-items-center">
          <button [disabled]="isError" (click)="sourceLanguage = {code: 'auto', name: 'auto'}" class="btn bg-transparent text">Detect Language</button>
          <button [disabled]="isError" (click)="getLanguages(true)" class="btn border border-1">
            <ng-container *ngIf="sourceLanguage; else setDefaultSelectBtn">
              {{sourceLanguage.name}}
            </ng-container>
          </button>
        </div>
        <div class="d-flex flex-even justify-content-center align-items-center">
          <span class="text">To</span>
        </div>
        <div class="d-flex flex-row flex-even justify-content-end align-items-center">
          <button [disabled]="isError" (click)="getLanguages(false)" class="btn border border-1">
            <ng-container *ngIf="destinationLanguage; else setDefaultSelectBtn">
              {{destinationLanguage.name}}
            </ng-container>
          </button>
        </div>
      </div>
    </div>
    <div class="card-body">
      <div [ngClass]="isSelectLanguageBtnClicked ? 'd-none' : ''" class="d-flex">
        <div class="flex-fill border-end border-1 w-100 p-1">
          <textarea [disabled]="isError" #textToTranslateInput class="w-100"></textarea>
        </div>
        <div class="flex-fill w-100">
          <p class="p-1">
            {{translatedText}}
          </p>
        </div>
      </div>
      <ng-container *ngIf="isSelectLanguageBtnClicked">
        <input [disabled]="isError" class="w-100 form-control mb-3" placeholder="Search language..." [(ngModel)]="languageToSearch">
        <div class="language-list" style="height: auto;">
          <ng-container *ngFor="let languageCode of languagesCodes | searchLanguage: languageToSearch">
            <button [disabled]="isError" [ngClass]="isSelectedLanguage(languageCode.code) ? 'selected-language' : 'language-btn'" class="btn default-btn d-inline-flex align-items-center w-100 m-1 text" (click)="selectLanguage(languageCode)">
              <svg *ngIf="isSelectedLanguage(languageCode.code)" class="mx-1" xmlns="http://www.w3.org/2000/svg" height="10pt" viewBox="0 -46 417.81333 417" width="10pt"><path d="m159.988281 318.582031c-3.988281 4.011719-9.429687 6.25-15.082031 6.25s-11.09375-2.238281-15.082031-6.25l-120.449219-120.46875c-12.5-12.5-12.5-32.769531 0-45.246093l15.082031-15.085938c12.503907-12.5 32.75-12.5 45.25 0l75.199219 75.203125 203.199219-203.203125c12.503906-12.5 32.769531-12.5 45.25 0l15.082031 15.085938c12.5 12.5 12.5 32.765624 0 45.246093zm0 0"/></svg>
              <span>{{languageCode.name}}</span>
            </button>
          </ng-container>
        </div>
      </ng-container>
    </div>
  </div>
  <ng-container *ngIf="isError">
    <div class="position-absolute d-flex w-100 justify-content-center">
      <span class="error-text text">An error has occurred ! Please retry later.</span>
    </div>
  </ng-container>
</div>

<ng-template #setDefaultSelectBtn>
  <span class="text">Choose</span>
  <svg viewBox="0 0 24 24" focusable="false" class="icon-select NMm5M"><path d="M5.41 7.59L4 9l8 8 8-8-1.41-1.41L12 14.17"></path></svg>
</ng-template>

